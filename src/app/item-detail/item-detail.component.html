<div *ngIf="!isFetching">
  <!-- section product-main -->
  <section class="product-main">
    <!-- container-fluid -->
    <div class="container-fluid mb-5">
      <!-- row -->
      <div class="row">
        <!-- col-sm-10 -->
        <div class="col-sm-10 mt-8 offset-sm-1">
          <!-- roe -->
          <div class="row">
            <!-- col-sm-4 -->
            <div class="col-sm-4 text-center">
              <img *ngIf="item" style="width:300px; margin-top:40px;" class="card-img-top img-fluid" [src]="item.img"
                alt="">
            </div>
            <!-- /. col-sm-4  -->
            <!-- col-sm-8 -->
            <div class="col-sm-8">
              <h1 *ngIf="item">{{ item.name }}</h1>
              <p *ngIf="item" class="mb-4">{{item.descriptionLong}}</p>
              <form class="input-group mb-4 px-1">
                <select class="form-control px-1">
                  <option selected>Geschmack</option>
                  <ng-container *ngIf="item">
                    <ng-container *ngFor="let flavour of item.flavours">
                      <option *ngIf="flavour !== null && flavour !== 'null'" [ngValue]="flavour">{{flavour}}</option>
                    </ng-container>
                  </ng-container>
                </select>
              </form>
              <div *ngIf="item && item.minSize !== 'null' && item.minSize !== ''" class="row mb-2">
                <div class="col-sm-12 text-left">
                  <p class="d-inline font-weight-bold">Größe ab: </p>
                  <h4 *ngIf="item" class="text-success d-inline">{{ item.minSize }}</h4>
                </div>
              </div>
              <div class="row">
                <div class="text-left col-sm-6 ">
                  <p class="d-inline font-weight-bold">Günstigster Preis: </p>
                  <h4 *ngIf="item" class="text-success d-inline">{{ item.minPrice.toFixed(2) }}€</h4>
                </div>
                <div class="text-right col-sm-6">
                  <button (click)="scroll(shopsSection)" class="btn btn-round btn-success">Zum Shop</button>
                </div>
              </div>
            </div>
            <!-- /. col-sm-8 -->
          </div>
          <!-- /.row -->
        </div>
        <!-- /. col-sm-10 -->
      </div>
      <!-- /. row -->
    </div>
    <!-- container-fluid -->
  </section>
  <!-- ./ section product-main -->

  <!-- section bewertungen -->
  <section class="bewertungen">
    <!-- container-fluid -->
    <div class="container-fluid mt-4 pb-5">
      <!-- row -->
      <div class="row">
        <!-- col-sm-10 -->
        <div class="col-sm-12">
          <!-- roe -->
          <div class="row">
            <!-- col-xl-12 header -->
            <div class="col-sm-10 offset-sm-1">
              <h2>Bewertungen</h2>
              <div class="stars">
                <span class="text-warning" [innerHTML]="stars"></span>
                <ng-container *ngIf="item && item.averageBewertung > 0">
                  {{ item.averageBewertung }} / 5.0
                </ng-container>
              </div>
            </div>
            <!-- /. col-sm-12 header -->
            <!-- col-sm-12 bewertungen-row -->
            <ng-container *ngIf="bewertungen">
              <div *ngFor="let bewertung of item.bewertungen; let lastItem = last;" class="col-sm-10 offset-sm-1">
                <p>{{ bewertung.text }}</p>
                <small class="text-muted">{{ bewertung.autor }}</small>
                <hr *ngIf="!lastItem">
              </div>
            </ng-container>
            <div *ngIf="!bewertungen" class="col-sm-11 offset-sm-1">
              <p>Noch keine Bewertungen vorhanden!</p>
            </div>
            <!-- /. col-sm-12 bewertungen row -->
          </div>
          <!-- /.row -->
        </div>
        <!-- /. col-sm-10 -->
      </div>
      <!-- /. row -->
    </div>
    <!-- container-fluid -->
  </section>
  <!-- ./ section bewertungen -->

  <!-- section naehrwerte -->
  <section class="naehrwerte">
    <!-- container-fluid -->
    <div class="container-fluid mt-4 pb-5">
      <!-- row -->
      <div class="row">
        <!-- col-sm-10 -->
        <div class="col-sm-12">
          <!-- roe -->
          <div class="row">
            <!-- col-xl-12 header -->
            <div class="col-sm-10 offset-sm-1">
              <h2>Nährwerte</h2>
            </div>
            <!-- /. col-sm-12 header -->
            <!-- col-sm-12 img-row -->
            <div class="col-sm-10 offset-sm-1">
              <img *ngIf="item && item.nutritionImg !== ''" class="img-fluid" [src]="item.nutritionImg" alt="">
              <p *ngIf="item && item.nutritionImg === '' && item.nutritionText !== '' && item.nutritionText !== 'null'">
                {{ item.nutritionText }}</p>
              <p *ngIf="item && item.nutritionImg === '' && item.nutritionText !== '' && item.nutritionText === 'null'">
                Noch keine Nährwerte erfasst!</p>
            </div>
            <!-- /. col-sm-12 img row -->
          </div>
          <!-- /.row -->
        </div>
        <!-- /. col-sm-10 -->
      </div>
      <!-- /. row -->
    </div>
    <!-- container-fluid -->
  </section>
  <!-- ./ section naehrwerte -->

  <!-- section allergens -->
  <section class="allergens">
    <!-- container-fluid -->
    <div class="container-fluid mt-4 pb-5">
      <!-- row -->
      <div class="row">
        <!-- col-sm-10 -->
        <div class="col-sm-12">
          <!-- roe -->
          <div class="row">
            <!-- col-xl-12 header -->
            <div class="col-sm-10 offset-sm-1">
              <h2>Allergene</h2>
            </div>
            <!-- /. col-sm-12 header -->
            <!-- col-sm-12 img-row -->
            <div class="col-sm-10 offset-sm-1">
              <ng-container
                *ngIf="item && item.allergens.length > 0 && item.allergens[0].toLowerCase() !== item.nutritionImg.toLowerCase()">
                <p *ngFor="let allergen of item.allergens">{{ allergen }}</p>
              </ng-container>
              <p *ngIf="item && item.allergens.length === 0">
                Keine Allergene!</p>
              <p
                *ngIf="item && item.allergens.length > 0 && item.allergens[0].toLowerCase() === item.nutritionImg.toLowerCase()">
                Siehe
                Nährwerte!</p>
            </div>
            <!-- /. col-sm-12 img row -->
          </div>
          <!-- /.row -->
        </div>
        <!-- /. col-sm-10 -->
      </div>
      <!-- /. row -->
    </div>
    <!-- container-fluid -->
  </section>
  <!-- ./ section allergens -->

  <!-- section shops -->
  <section class="shops" #shopsSection>
    <!-- container-fluid -->
    <div class="container-fluid mt-4 pb-5">
      <!-- row -->
      <div class="row">
        <!-- col-sm-10 -->
        <div class="col-sm-12">
          <!-- roe -->
          <div class="row">
            <!-- col-xl-12 header -->
            <div class="col-sm-10 offset-sm-1">
              <h2>Günstigster Preis</h2>
            </div>
            <!-- /. col-sm-12 header -->
            <!-- col-sm-12 img-row -->
            <div class="col-sm-10 offset-sm-1">
              <ng-container *ngIf="shops && item">
                <div *ngFor="let shop of shops; let lastItem = last;">
                  <div class="row">
                    <div class="col-md-2">
                      <img class="img-fluid" [src]="shop.img" alt="">
                    </div>
                    <div class="col-md-2 text-center my-auto">
                      <p class="mb-0" style="font-size:150%; font-weight:bold;">
                        {{ getShopItemPrice(shop.sid).toFixed(2) }}€ </p>
                    </div>
                    <div class="col-md-3 text-center my-auto">
                      <p class="mb-1 pt-1">Versandkosten: {{ shop.shipping.toFixed(2) }}€</p>
                      <p>Ab {{ shop.shippingFree }}€ Bestellwert frei</p>
                    </div>
                    <div class="col-md-3 text-center my-auto">
                      <p class="pt-1">Lieferzeit: {{ shop.deliveryTime }}</p>
                    </div>
                    <div class="col-md-2 text-right my-auto">
                      <button (click)="onShopClick(shop.sid)" class="btn btn-round btn-success mt-1">Zum
                        Shop</button>
                    </div>
                  </div>
                  <hr *ngIf="!lastItem">
                </div>
              </ng-container>
            </div>
            <!-- /. col-sm-12 img row -->
          </div>
          <!-- /.row -->
        </div>
        <!-- /. col-sm-10 -->
      </div>
      <!-- /. row -->
    </div>
    <!-- container-fluid -->
  </section>
  <!-- ./ section shops -->
</div>

<div *ngIf="isFetching" class="fetching-container">
  <div class="lds-grid">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>