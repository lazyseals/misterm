<ng-container *ngIf="!isFetching">
  <!-- product-main -->
  <div class="container-fluid">
    <div class="product-main row mb-5 mx-5">

      <!-- Header -->
      <div class="col-12 big-box">
        <h1 *ngIf="item">{{ item.name }}</h1>
      </div>
      <!-- /. Header -->

      <!-- Product image -->
      <div class="col-4 big-box text-center">
        <img *ngIf="item" class="card-img-top img-fluid" [src]="item.img" alt="">
      </div>
      <!-- /. Product image  -->

      <!-- Product information -->
      <div class="col-8 big-box">

        <!-- Product description long -->
        <p *ngIf="item" class="mb-4 text-justify">{{item.descriptionLong}}</p>
        <!-- /. Product desciption long -->

        <!-- Geschmack -->
        <form class="input-group mb-4 px-1">
          <select class="form-control px-1">
            <option selected>Geschmack</option>
            <ng-container *ngIf="item">
              <ng-container *ngFor="let flavour of item.flavours">
                <option *ngIf="flavour !== null && flavour !== 'null'" [ngValue]="flavour">{{flavour}}</option>
              </ng-container>
            </ng-container>
          </select>
        </form>
        <!-- /. Geschmack -->

        <!-- Sizes -->
        <div class="row" *ngIf="item && item.minSize !== 'null' && item.minSize !== ''">
          <div class="col-12 text-left">
            <p class="mini-box d-inline font-weight-bold">Größe ab: </p>
            <h4 class="mini-box text-success d-inline" *ngIf="item">{{ item.minSize }}</h4>
          </div>
        </div>
        <!-- /. Sizes -->

        <div class="row">
          <div class="col-6 text-left">
            <p class="mini-box d-inline font-weight-bold">Günstigster Preis: </p>
            <h4 class="mini-box text-success d-inline" *ngIf="item">{{ item.minPrice.toFixed(2) }}€</h4>
          </div>
          <div class="text-right col-6">
            <button class="mini-box btn btn-round btn-success" (click)="scroll(shopsSection)">Zum Shop</button>
          </div>
        </div>
      </div>
      <!-- /. Product information -->

    </div>
  </div>
  <!-- product-main -->

  <!-- bewertungen -->
  <div class="container-fluid">
    <div class="row mt-4 pb-5 mx-5">

      <!-- header -->
      <div class="col-12">
        <h2 class="w-100 d-inline-block">Bewertungen
          <div class="stars d-inline-block float-right">
            <span class="text-warning" [innerHTML]="stars"></span>
            <ng-container *ngIf="item && item.averageBewertung > 0">
              {{ item.averageBewertung }} / 5.0
            </ng-container>
          </div>
        </h2>
      </div>
      <!-- /. header -->

      <!-- bewertungen-row -->
      <ng-container *ngIf="bewertungen">
        <div class="col-12" *ngFor="let bewertung of item.bewertungen; let lastItem = last;">
          <p>{{ bewertung.text }}</p>
          <small class="text-muted">{{ bewertung.autor }}</small>
          <hr *ngIf="!lastItem">
        </div>
      </ng-container>
      <div class="col-12" *ngIf="!bewertungen">
        <p>Noch keine Bewertungen vorhanden!</p>
      </div>
      <!-- /. bewertungen row -->

    </div>
  </div>
  <!-- ./ bewertungen -->

  <!-- section naehrwerte -->
  <div class="container-fluid">
    <div class="naehrwerte row mt-4 pb-5 mx-5">
      <!-- header -->
      <div class="col-12">
        <h2>Nährwerte</h2>
      </div>
      <!-- /. header -->

      <!-- img-row -->
      <div class="col-12">
        <img class="img-fluid" *ngIf="item && item.nutritionImg !== ''" [src]="item.nutritionImg" alt="">
        <p *ngIf="item && item.nutritionImg === '' && item.nutritionText !== '' && item.nutritionText !== 'null'"
          class="text-justify">
          {{ item.nutritionText }}</p>
        <p *ngIf="item && item.nutritionImg === '' && item.nutritionText !== '' && item.nutritionText === 'null'">
          Noch keine Nährwerte erfasst!</p>
      </div>
      <!-- /. img row -->
    </div>
  </div>
  <!-- ./ section naehrwerte -->

  <!-- section allergens -->
  <div class="container-fluid">
    <div class="row mt-4 pb-5 mx-5">

      <!-- header -->
      <div class="col-12">
        <h2>Allergene</h2>
      </div>
      <!-- /. header -->

      <!-- img-row -->
      <div class="col-12">
        <ng-container
          *ngIf="item && item.allergens.length > 0 && item.allergens[0].toLowerCase() !== item.nutritionImg.toLowerCase()">
          <p *ngFor="let allergen of item.allergens">{{ allergen }}</p>
        </ng-container>
        <p *ngIf="item && item.allergens.length === 0">
          Keine Allergene!</p>
        <p
          *ngIf="item && item.allergens.length > 0 && item.allergens[0].toLowerCase() === item.nutritionImg.toLowerCase()">
          Siehe
          Nährwerte!</p>
      </div>
      <!-- /. img row -->

    </div>
  </div>
  <!-- ./ section allergens -->

  <div class="shops container-fluid" #shopsSection>
    <div class="row mt-4 pb-5 mx-5">

      <!-- header -->
      <div class="col-12 big-box">
        <h2>Günstigster Preis</h2>
      </div>
      <!-- /. header -->

      <!-- Shop information -->
      <div class="col-12 big-box">
        <ng-container *ngIf="shops && item">
          <div *ngFor="let shop of shops; let lastItem = last;">
            <div class="row">
              <div class="col-2">
                <img class="img-fluid mini-box" [src]="shop.img" alt="">
              </div>
              <div class="col-2 text-center my-auto">
                <p class="mb-0 mini-box" style="font-size:150%; font-weight:bold;">
                  {{ getShopItemPrice(shop.sid).toFixed(2) }}€ </p>
              </div>
              <div class="col-3 text-center my-auto">
                <p class="mb-1 pt-1 mini-box">Versandkosten: {{ shop.shipping.toFixed(2) }}€</p>
                <p class="mini-box">Ab {{ shop.shippingFree }}€ Bestellwert frei</p>
              </div>
              <div class="col-3 text-center my-auto">
                <p class="pt-1 mini-box">Lieferzeit: {{ shop.deliveryTime }}</p>
              </div>
              <div class="col-2 text-right my-auto">
                <button class="mini-box btn btn-round btn-success mt-1" (click)="onShopClick(shop.sid)">Zum
                  Shop</button>
              </div>
            </div>
            <hr *ngIf="!lastItem">
          </div>
        </ng-container>
      </div>
      <!-- /. Shop information -->

    </div>
  </div>
  <!-- ./ section shops -->
</ng-container>

<div *ngIf="isFetching" class="fetching-container">
  <div class="lds-grid">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>